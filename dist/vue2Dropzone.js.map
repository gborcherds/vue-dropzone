{"version":3,"file":"vue2Dropzone.js","sources":["../src/services/urlsigner.js","../src/components/vue-dropzone.vue"],"sourcesContent":["export default {\n  getSignedURL(file, config) {\n    let payload = {\n      filePath: file.name,\n      contentType: file.type\n    }\n\n    return new Promise((resolve, reject) => {\n      var fd = new FormData();\n      let request = new XMLHttpRequest(),\n          signingURL = (typeof config.signingURL === \"function\") ?  config.signingURL(file) : config.signingURL;\n      request.open(\"POST\", signingURL);\n      request.onload = function () {\n        if (request.status == 200) {\n          resolve(JSON.parse(request.response));\n        } else {\n          reject((request.statusText));\n        }\n      };\n      request.onerror = function (err) {\n        console.error(\"Network Error : Could not send request to AWS (Maybe CORS errors)\");\n        reject(err)\n      };\n      Object.entries(config.headers || {}).forEach(([name, value]) => {\n        request.setRequestHeader(name, value);\n      });\n      payload = Object.assign(payload, config.params || {});\n      Object.entries(payload).forEach(([name, value]) => {\n        fd.append(name, value);\n      });\n\n      request.send(fd);\n    });\n  },\n  sendFile(file, config, is_sending_s3) {\n    var handler = (is_sending_s3) ? this.setResponseHandler : this.sendS3Handler;\n\n    return this.getSignedURL(file, config)\n      .then((response) => {return handler(response, file)})\n      .catch((error) => { return error; });\n  },\n  setResponseHandler(response, file) {\n    file.s3Signature = response.signature;\n    file.s3Url = response.postEndpoint;\n  },\n  sendS3Handler(response, file) {\n    let fd = new FormData(),\n      signature = response.signature;\n\n    Object.keys(signature).forEach(function (key) {\n      fd.append(key, signature[key]);\n    });\n    fd.append('file', file);\n    return new Promise((resolve, reject) => {\n      let request = new XMLHttpRequest();\n      request.open('POST', response.postEndpoint);\n      request.onload = function () {\n        if (request.status == 201) {\n          resolve({\n            'success': true,\n            'message': request.response\n          })\n        } else {\n          reject({\n            'success': false,\n            'message': request.response\n          })\n        }\n      };\n      request.onerror = function (err) {\n        reject({\n          'success': false,\n          'message': request.response\n        })\n      };\n      request.send(fd);\n    });\n  }\n}\n","<template>\n  <div v-bind:class=\"{ 'vue-dropzone dropzone': includeStyling }\" :id=\"id\" ref=\"dropzoneElement\">\n  </div>\n</template>\n\n<script>\nimport awsEndpoint from '../services/urlsigner'\nexport default {\n  props: {\n    id: {\n      type: String,\n      required: true\n    },\n    options: {\n      type: Object,\n      required: true\n    },\n    includeStyling: {\n      type: Boolean,\n      default: true,\n      required: false\n    },\n    awss3: {\n      type: Object,\n      required: false,\n      default: null\n    },\n    destroyDropzone: {\n      type: Boolean,\n      default: true,\n      required: false\n    }\n  },\n  data() {\n    return {\n      isS3: false,\n      isS3OverridesServerPropagation: false,\n      wasQueueAutoProcess: true,\n    }\n  },\n  computed: {\n    dropzoneSettings() {\n      let defaultValues = {\n        thumbnailWidth: 200,\n        thumbnailHeight: 200\n      }\n      Object.keys(this.options).forEach(function(key) {\n        defaultValues[key] = this.options[key]\n      }, this)\n      if (this.awss3 !== null) {\n        defaultValues['autoProcessQueue'] = false;\n        this.isS3 = true;\n        this.isS3OverridesServerPropagation = (this.awss3.sendFileToServer === false);\n        if (this.options.autoProcessQueue !== undefined)\n          this.wasQueueAutoProcess = this.options.autoProcessQueue;\n\n        if (this.isS3OverridesServerPropagation) {\n          defaultValues['url'] = (files) => {\n            return files[0].s3Url;\n          }\n        }\n      }\n      return defaultValues\n    }\n  },\n  methods: {\n    manuallyAddFile: function(file, fileUrl) {\n      file.manuallyAdded = true;\n      this.dropzone.emit(\"addedfile\", file);\n      fileUrl && this.dropzone.emit(\"thumbnail\", file, fileUrl);\n\n      var thumbnails = file.previewElement.querySelectorAll('[data-dz-thumbnail]');\n      for (var i = 0; i < thumbnails.length; i++) {\n        thumbnails[i].style.width = this.dropzoneSettings.thumbnailWidth + 'px';\n        thumbnails[i].style.height = this.dropzoneSettings.thumbnailHeight + 'px';\n        thumbnails[i].style['object-fit'] = 'contain';\n      }\n      this.dropzone.emit(\"complete\", file)\n      if (this.dropzone.options.maxFiles) this.dropzone.options.maxFiles--\n      this.dropzone.files.push(file)\n      this.$emit('vdropzone-file-added-manually', file)\n    },\n    setOption: function(option, value) {\n      this.dropzone.options[option] = value\n    },\n    removeAllFiles: function(bool) {\n      this.dropzone.removeAllFiles(bool)\n    },\n    processQueue: function() {\n      let dropzoneEle = this.dropzone;\n      if (this.isS3 && !this.wasQueueAutoProcess) {\n        this.getQueuedFiles().forEach((file) => {\n          this.getSignedAndUploadToS3(file);\n        });\n      } else {\n        this.dropzone.processQueue();\n      }\n      this.dropzone.on(\"success\", function() {\n        dropzoneEle.options.autoProcessQueue = true\n      });\n      this.dropzone.on('queuecomplete', function() {\n        dropzoneEle.options.autoProcessQueue = false\n      })\n    },\n    init: function() {\n      return this.dropzone.init();\n    },\n    destroy: function() {\n      return this.dropzone.destroy();\n    },\n    updateTotalUploadProgress: function() {\n      return this.dropzone.updateTotalUploadProgress();\n    },\n    getFallbackForm: function() {\n      return this.dropzone.getFallbackForm();\n    },\n    getExistingFallback: function() {\n      return this.dropzone.getExistingFallback();\n    },\n    setupEventListeners: function() {\n      return this.dropzone.setupEventListeners();\n    },\n    removeEventListeners: function() {\n      return this.dropzone.removeEventListeners();\n    },\n    disable: function() {\n      return this.dropzone.disable();\n    },\n    enable: function() {\n      return this.dropzone.enable();\n    },\n    filesize: function(size) {\n      return this.dropzone.filesize(size);\n    },\n    accept: function(file, done) {\n      return this.dropzone.accept(file, done);\n    },\n    addFile: function(file) {\n      return this.dropzone.addFile(file);\n    },\n    removeFile: function(file) {\n      this.dropzone.removeFile(file)\n    },\n    getAcceptedFiles: function() {\n      return this.dropzone.getAcceptedFiles()\n    },\n    getRejectedFiles: function() {\n      return this.dropzone.getRejectedFiles()\n    },\n    getFilesWithStatus: function() {\n      return this.dropzone.getFilesWithStatus()\n    },\n    getQueuedFiles: function() {\n      return this.dropzone.getQueuedFiles()\n    },\n    getUploadingFiles: function() {\n      return this.dropzone.getUploadingFiles()\n    },\n    getAddedFiles: function() {\n      return this.dropzone.getAddedFiles()\n    },\n    getActiveFiles: function() {\n      return this.dropzone.getActiveFiles()\n    },\n    getSignedAndUploadToS3(file) {\n      var promise = awsEndpoint.sendFile(file, this.awss3, this.isS3OverridesServerPropagation);\n        if (!this.isS3OverridesServerPropagation) {\n          promise.then((response) => {\n            if (response.success) {\n              file.s3ObjectLocation = response.message\n              setTimeout(() => this.dropzone.processFile(file))\n              this.$emit('vdropzone-s3-upload-success', response.message);\n            } else {\n              if ('undefined' !== typeof response.message) {\n                this.$emit('vdropzone-s3-upload-error', response.message);\n              } else {\n                this.$emit('vdropzone-s3-upload-error', \"Network Error : Could not send request to AWS. (Maybe CORS error)\");\n              }\n            }\n          });\n        } else {\n          promise.then(() => {\n            setTimeout(() => this.dropzone.processFile(file))\n        });\n      }\n      promise.catch((error) => {\n        alert(error);\n      });\n    },\n    setAWSSigningURL(location) {\n      if (this.isS3) {\n        this.awss3.signingURL = location;\n      }\n    }\n  },\n  mounted() {\n    if (this.$isServer && this.hasBeenMounted) {\n      return\n    }\n    this.hasBeenMounted = true\n    let Dropzone = require('dropzone') //eslint-disable-line\n    Dropzone.autoDiscover = false\n    this.dropzone = new Dropzone(this.$refs.dropzoneElement, this.dropzoneSettings)\n    let vm = this\n\n    this.dropzone.on('thumbnail', function(file, dataUrl) {\n      vm.$emit('vdropzone-thumbnail', file, dataUrl)\n    })\n\n    this.dropzone.on('addedfile', function(file) {\n      if (vm.duplicateCheck) {\n        if (this.files.length) {\n          this.files.forEach(function(dzfile) {\n            if (dzfile.name === file.name) {\n              this.removeFile(file)\n              vm.$emit('duplicate-file', file)\n            }\n          }, this)\n        }\n      }\n      vm.$emit('vdropzone-file-added', file)\n      if (vm.isS3 && vm.wasQueueAutoProcess) {\n        vm.getSignedAndUploadToS3(file);\n      }\n    })\n\n    this.dropzone.on('addedfiles', function(files) {\n      vm.$emit('vdropzone-files-added', files)\n    })\n\n    this.dropzone.on('removedfile', function(file) {\n      vm.$emit('vdropzone-removed-file', file)\n      if (file.manuallyAdded) vm.dropzone.options.maxFiles++\n    })\n\n    this.dropzone.on('success', function(file, response) {\n      vm.$emit('vdropzone-success', file, response)\n      if (vm.isS3) {\n        if(vm.isS3OverridesServerPropagation){\n          var xmlResponse = (new window.DOMParser()).parseFromString(response, \"text/xml\");\n          var s3ObjectLocation = xmlResponse.firstChild.children[0].innerHTML;\n          vm.$emit('vdropzone-s3-upload-success', s3ObjectLocation);\n        }\n          if (vm.wasQueueAutoProcess)\n            vm.setOption('autoProcessQueue', false);\n      }\n    })\n\n    this.dropzone.on('successmultiple', function(file, response) {\n      vm.$emit('vdropzone-success-multiple', file, response)\n    })\n\n    this.dropzone.on('error', function(file, message, xhr) {\n      vm.$emit('vdropzone-error', file, message, xhr)\n      if (this.isS3)\n        vm.$emit('vdropzone-s3-upload-error');\n    })\n\n    this.dropzone.on('errormultiple', function(files, message, xhr) {\n      vm.$emit('vdropzone-error-multiple', files, message, xhr)\n    })\n\n    this.dropzone.on('sending', function(file, xhr, formData) {\n      if (vm.isS3) {\n        if (vm.isS3OverridesServerPropagation) {\n          let signature = file.s3Signature;\n          Object.keys(signature).forEach(function (key) {\n            formData.append(key, signature[key]);\n          });\n        } else {\n          formData.append('s3ObjectLocation', file.s3ObjectLocation);\n        }\n      }\n      vm.$emit('vdropzone-sending', file, xhr, formData)\n    })\n\n    this.dropzone.on('sendingmultiple', function(file, xhr, formData) {\n      vm.$emit('vdropzone-sending-multiple', file, xhr, formData)\n    })\n\n    this.dropzone.on('complete', function(file) {\n      vm.$emit('vdropzone-complete', file)\n    })\n\n    this.dropzone.on('completemultiple', function(files) {\n      vm.$emit('vdropzone-complete-multiple', files)\n    })\n\n    this.dropzone.on('canceled', function(file) {\n      vm.$emit('vdropzone-canceled', file)\n    })\n\n    this.dropzone.on('canceledmultiple', function(files) {\n      vm.$emit('vdropzone-canceled-multiple', files)\n    })\n\n    this.dropzone.on('maxfilesreached', function(files) {\n      vm.$emit('vdropzone-max-files-reached', files)\n    })\n\n    this.dropzone.on('maxfilesexceeded', function(file) {\n      vm.$emit('vdropzone-max-files-exceeded', file)\n    })\n\n    this.dropzone.on('processing', function(file) {\n      vm.$emit('vdropzone-processing', file)\n    })\n\n    this.dropzone.on('processing', function(file) {\n      vm.$emit('vdropzone-processing', file)\n    })\n\n    this.dropzone.on('processingmultiple', function(files) {\n      vm.$emit('vdropzone-processing-multiple', files)\n    })\n\n    this.dropzone.on('uploadprogress', function(file, progress, bytesSent) {\n      vm.$emit('vdropzone-upload-progress', file, progress, bytesSent)\n    })\n\n    this.dropzone.on('totaluploadprogress', function(totaluploadprogress, totalBytes, totalBytesSent) {\n      vm.$emit('vdropzone-total-upload-progress', totaluploadprogress, totalBytes, totalBytesSent)\n    })\n\n    this.dropzone.on('reset', function() {\n      vm.$emit('vdropzone-reset')\n    })\n\n    this.dropzone.on('queuecomplete', function() {\n      vm.$emit('vdropzone-queue-complete')\n    })\n\n    this.dropzone.on('drop', function(event) {\n      vm.$emit('vdropzone-drop', event)\n    })\n\n    this.dropzone.on('dragstart', function(event) {\n      vm.$emit('vdropzone-drag-start', event)\n    })\n\n    this.dropzone.on('dragend', function(event) {\n      vm.$emit('vdropzone-drag-end', event)\n    })\n\n    this.dropzone.on('dragenter', function(event) {\n      vm.$emit('vdropzone-drag-enter', event)\n    })\n\n    this.dropzone.on('dragover', function(event) {\n      vm.$emit('vdropzone-drag-over', event)\n    })\n\n    this.dropzone.on('dragleave', function(event) {\n      vm.$emit('vdropzone-drag-leave', event)\n    })\n\n    vm.$emit('vdropzone-mounted')\n  },\n  beforeDestroy() {\n    if (this.destroyDropzone) this.dropzone.destroy()\n  }\n}\n\n</script>\n\n<style lang=\"less\">\n  @import (inline) '../../node_modules/dropzone/dist/dropzone.css';\n\n  .vue-dropzone {\n    border: 2px solid #E5E5E5;\n    font-family: 'Arial', sans-serif;\n    letter-spacing: 0.2px;\n    color: #777;\n    transition: background-color .2s linear;\n\n    &:hover {\n      background-color: #F6F6F6;\n    }\n\n    i {\n      color: #CCC;\n    }\n\n    .dz-preview {\n\n      .dz-image {\n        border-radius: 0;\n        width: 100%;\n        height: 100%;\n        img:not([src]) {\n          width: 200px;\n          height: 200px;\n        }\n        &:hover {\n          img {\n            transform: none;\n            -webkit-filter: none;\n          }\n        }\n      }\n\n      .dz-details {\n        bottom: 0;\n        top: 0;\n        color: white;\n        background-color: rgba(33, 150, 243, 0.8);\n        transition: opacity .2s linear;\n        text-align: left;\n        .dz-filename {\n          overflow: hidden;\n        }\n        .dz-filename span,\n        .dz-size span {\n          background-color: transparent;\n        }\n        .dz-filename:not(:hover) span {\n          border: none;\n        }\n        .dz-filename:hover span {\n          background-color: transparent;\n          border: none;\n        }\n      }\n\n      .dz-progress .dz-upload {\n        background: #cccccc;\n      }\n\n      .dz-remove {\n        position: absolute;\n        z-index: 30;\n        color: white;\n        margin-left: 15px;\n        padding: 10px;\n        top: inherit;\n        bottom: 15px;\n        border: 2px white solid;\n        text-decoration: none;\n        text-transform: uppercase;\n        font-size: 0.8rem;\n        font-weight: 800;\n        letter-spacing: 1.1px;\n        opacity: 0;\n      }\n\n      &:hover {\n        .dz-remove {\n          opacity: 1;\n        }\n      }\n\n      .dz-success-mark,\n      .dz-error-mark {\n        margin-left: auto;\n        margin-top: auto;\n        width: 100%;\n        top: 35%;\n        left: 0;\n        svg {\n          margin-left: auto;\n          margin-right: auto;\n        }\n      }\n\n      .dz-error-message {\n        top: calc(15%);\n        margin-left: auto;\n        margin-right: auto;\n        left: 0;\n        width: 100%;\n        &:after {\n          bottom: -6px;\n          top: initial;\n          border-top: 6px solid #a92222;\n          border-bottom: none;\n        }\n      }\n    }\n  }\n</style>\n"],"names":["getSignedURL","file","config","let","payload","filePath","name","contentType","type","Promise","resolve","reject","fd","FormData","request","XMLHttpRequest","signingURL","open","onload","status","JSON","parse","response","onerror","err","console","error","Object","entries","headers","forEach","ref","value","setRequestHeader","assign","params","append","send","sendFile","is_sending_s3","handler","this","setResponseHandler","sendS3Handler","then","catch","s3Signature","signature","s3Url","postEndpoint","keys","key","success","message","render","props","id","String","required","options","includeStyling","Boolean","default","awss3","destroyDropzone","data","isS3","isS3OverridesServerPropagation","wasQueueAutoProcess","computed","dropzoneSettings","defaultValues","thumbnailWidth","thumbnailHeight","sendFileToServer","undefined","autoProcessQueue","files","methods","manuallyAddFile","fileUrl","manuallyAdded","dropzone","emit","thumbnails","previewElement","querySelectorAll","i","length","style","width","height","maxFiles","push","$emit","setOption","option","removeAllFiles","bool","processQueue","dropzoneEle","getQueuedFiles","getSignedAndUploadToS3","on","init","destroy","updateTotalUploadProgress","getFallbackForm","getExistingFallback","setupEventListeners","removeEventListeners","disable","enable","filesize","size","accept","done","addFile","removeFile","getAcceptedFiles","getRejectedFiles","getFilesWithStatus","getUploadingFiles","getAddedFiles","getActiveFiles","promise","awsEndpoint","setTimeout","processFile","s3ObjectLocation","alert","setAWSSigningURL","location","mounted","$isServer","hasBeenMounted","Dropzone","require","autoDiscover","$refs","dropzoneElement","vm","dataUrl","duplicateCheck","dzfile","window","DOMParser","parseFromString","firstChild","children","innerHTML","xhr","formData","progress","bytesSent","totaluploadprogress","totalBytes","totalBytesSent","event","beforeDestroy"],"mappings":"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"}